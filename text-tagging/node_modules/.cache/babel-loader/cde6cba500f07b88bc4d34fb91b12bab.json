{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Yifat\\\\finalProject\\\\text-tagging\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Yifat\\\\finalProject\\\\text-tagging\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Yifat\\\\finalProject\\\\text-tagging\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Yifat\\\\finalProject\\\\text-tagging\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Background from\"../images/backgroundabout.jpg\";import logo from\"../images/logo.png\";import biulogo from\"../images/biulogo.png\";import TaggedTextArea from\"./taggedTextArea\";import\"react-s-alert/dist/s-alert-default.css\";import Alert from\"react-s-alert\";import\"react-s-alert/dist/s-alert-default.css\";import\"react-s-alert/dist/s-alert-css-effects/slide.css\";var divStyle={color:\"#5B6676\",fontSize:\"medium\",fontFamily:\"Arial\",backgroundSize:\"contain\",overflowX:\"hidden\",height:\"100vh\",background:\"url(shutterstock_125995700.jpg)\",backgroundImage:\"url(\".concat(Background,\")\")};var buttonStyle={backgroundColor:\"#74CDD1\"};// backgroundSize: \"100%\",\nvar Main=/*#__PURE__*/function(_Component){_inherits(Main,_Component);var _super=_createSuper(Main);function Main(){var _this;_classCallCheck(this,Main);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={// Holds infornation on the files are cuurently being worked on.\nfilename:\"\",conffilename:\"\",fileContent:\"\",configurationFileContent:\"\",isUpTodate:true,// Holds te lists of files, configuration files, and spesial character,\n// the server have sent.\nfilesList:[],confFileList:[],specialCharsList:[],// Holds the tags' names the user can tag the text with.\n// Each tag has its color.\ntagsList:[],tagsAndColors:{},// Used when a new file is uploaded to the server.\nfileToUploadName:\"\",fileToUploadContent:\"\",newlyUploadedFileName:\"\",// Saves the title of the current page presented/\npageLayout:\"choose\",// Holds a list of file types the user can download from the server.\nfileTypes:[\"clean file\",\"tagged file\",\"report\",\"html\"]};_this.arrageConfigutationsFromServer=function(configurations){// Saperate the files to text files and configuration files.\nvar confs=configurations.split(\"\\n\");// Seperate the text files names.\nvar textFiles=confs[0].split(\",\");// Seperates the configuration file names.\nvar confFiles=confs[1].split(\",\");// Seperate the spacial chars the marker will egnore.\nvar spacialChars=confs[2].split(\" \");spacialChars.push(\" \");spacialChars.push(\"\\n\");spacialChars.push(\"\\r\");_this.state.filesList=textFiles;_this.state.confFileList=confFiles;_this.setState({specialCharsList:spacialChars});_this.UpdateChosenFile();};_this.handleClickOnUpload=function(event){if(window.File&&window.FileReader&&window.FileList&&window.Blob){// var preview = document.getElementById(\"temporaryPlace\");\nvar file=document.querySelector(\"input[id=text_file]\").files[0];var reader=new FileReader();var textFile=/text.*/;var namefile=event.target.value;namefile=namefile.split(\"\\\\\");_this.state.fileToUploadName=namefile[namefile.length-1];if(file.type.match(textFile)){reader.onload=_this.uploadFileToServer;}reader.readAsText(file);}else{alert(\"Your browser is too old to support HTML5 File API\");}};_this.handleClickLoadFiles=function(eventArgs){var textFile=document.getElementById(\"fileChoser\");textFile=textFile.value;_this.getFileFromServer(textFile);var confFile=document.getElementById(\"conffileChoser\");confFile=confFile.value;_this.getFileFromServer(confFile);_this.state.isUpTodate=true;_this.setState({pageLayout:\"edit\"});};_this.makeStatisticsFile=function(){var address=\"http://localhost:9000/makeReport\";fetch(address,{method:\"POST\",headers:{\"Content-type\":\"application/json\"},body:JSON.stringify({data:_this.state.fileContent,filename:_this.state.filename,confData:_this.state.configurationFileContent,confFileName:_this.state.conffilename})}).then(function(response){});};_this.handleSaveFile=function(event){_this.makeStatisticsFile();_this.makeHtml();_this.saveFileToServer(_this.state.filename,_this.state.fileContent);_this.state.isUpTodate=true;};_this.saveFileToServer=function(fileTosaveName,fileTosaveData){var address=\"http://localhost:9000/saveFile\";fetch(address,{method:\"POST\",headers:{\"Content-type\":\"application/json\"},body:JSON.stringify({data:fileTosaveData,filename:fileTosaveName})}).then(function(response){//let answer = response.body.getReader();\nconsole.log();});};_this.handleClickRetrunToMainMenu=function(event){if(!_this.state.isUpTodate){_this.raiseWarning(event);}else{_this.setState({pageLayout:\"choose\"});}// Set isUpTodate to  true, to allow the user\n// to return to the main menu without saveing his work.\n// (At the first attempt of a user to return to the main menu,\n// a warning message appears, and at the secound attempt, \n// the application returns to the main menu).\n_this.state.isUpTodate=true;};_this.handleClickOnDownload=function(eventArgs){var action=document.getElementById(\"actionChooser\");action=action.value;var filename=document.getElementById(\"fileToDownloadChooser\");filename=filename.value;var conffilename=document.getElementById(\"conffileToDownloadChooser\");conffilename=conffilename.value;var downloadedFileName=action+\"_\"+filename;if(action===\"html\"){downloadedFileName=filename+\".html\";}var address=\"http://localhost:9000/downloadfile\";fetch(address,{method:\"POST\",headers:{\"Content-type\":\"application/json\"},body:JSON.stringify({action:action,filename:filename,confFileName:conffilename})}).then(function(response){response.blob().then(function(blob){var url=window.URL.createObjectURL(blob);var a=document.createElement(\"a\");a.href=url;a.download=downloadedFileName;a.click();});});};_this.setCurrentTextFile=function(text){var filename=text.split(\"\\n\");var fileData=text.slice(filename[0].length+1,text.lenth);//first chunk of text is the name\n_this.setState({filename:filename[0]});//the rest of the text\n_this.setState({fileContent:fileData});};_this.setCurrentConfigurationFile=function(text){var filename=text.split(\"\\n\");var conFileContent=filename.slice(1,filename.length);var newTags={};//person: \"yellow\", place: \"red\", bla: \"lightpink\", period: \"green\"};\n// Helps to create the context menu.\nvar tagslist=[];for(var i=0;i<conFileContent.length;i++){var currentPair=conFileContent[i].split(\":\");tagslist.push(currentPair[0]);var pairKey=currentPair[0];var pairValue=currentPair[1];newTags[pairKey]=pairValue;}_this.state.conffilename=filename[0];_this.state.configurationFileContent=conFileContent;_this.state.tagsList=tagslist;// Initiate setState so the view will update.\n_this.setState({tagsAndColors:newTags});};_this.uploadFileToServer=function(event){var fileToUploadContent=event.target.result;_this.saveFileToServer(_this.state.fileToUploadName,fileToUploadContent);// Get the updated list of files on the server.\n_this.getConficurationFromServer();//  this.UpdateChosenFile();\n};_this.makeHtml=function(){var textFile=document.getElementById(\"text\");textFile=textFile.innerHTML;var htmlFile=\"\";htmlFile+=\"<!DOCTYPE html>\";htmlFile+=\"<html>\";htmlFile+=\"<head>\";htmlFile+=\"<title>\";htmlFile+=_this.state.filename;htmlFile+=\"</title>\";htmlFile+=\"</head>\";htmlFile+=\"<body>\";htmlFile+=\"<h3>\";htmlFile+=textFile;htmlFile+=\"</h3>\";htmlFile+=\"</body>\";htmlFile+=\"</html>\";var address=\"http://localhost:9000/saveFile\";fetch(address,{method:\"POST\",headers:{\"Content-type\":\"application/json\"},body:JSON.stringify({data:htmlFile,filename:_this.state.filename+\".html\"})}).then(function(response){//let answer = response.body.getReader();\n});};_this.UpdateChosenFile=function(){// If the list of files sent from the server had the file was added to the server.\nvar exists=_this.state.filesList.some(function(v){return v===_this.state.fileToUploadName;});if(exists){var textFile=document.getElementById(\"fileChoser\");textFile.value=_this.state.fileToUploadName;}_this.state.fileToUploadName=\"\";};_this.getFileFromServer=function(fileName){//var fileName = filename; //eventArgs.currentTarget.innerHTML.trim();\nvar request;if(!fileName.endsWith(\".txt\")){request=\"http://localhost:9000/openConfigurationFile/\"+fileName;fetch(request).then(function(res){return res.text();}).then(function(res){return _this.setCurrentConfigurationFile(res);});}else{request=\"http://localhost:9000/openFile/\"+fileName;fetch(request).then(function(res){return res.text();}).then(function(res){return _this.setCurrentTextFile(res);});}};_this.returnPageLayout=function(){if(_this.state.pageLayout===\"choose\"){return _this.returnMainMenuLayout();}else if(_this.state.pageLayout===\"edit\"){return _this.returnEditPageLayout();}};_this.returnMainMenuLayout=function(){var page=/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{align:\"center\"},\" \",/*#__PURE__*/React.createElement(\"b\",null,\"1. Select an existing document\"),\" \"),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"select\",{name:\"fileChoser\",id:\"fileChoser\"},\" \",_this.createList(_this.state.filesList)),\" \")),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{align:\"center\"},/*#__PURE__*/React.createElement(\"b\",null,\" -or- \"),\" \"),/*#__PURE__*/React.createElement(\"td\",null,\" \")),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{align:\"center\"},/*#__PURE__*/React.createElement(\"b\",null,\"Upload New File to Server \",/*#__PURE__*/React.createElement(\"br\",null),\" \")),/*#__PURE__*/React.createElement(\"td\",null,\" \",/*#__PURE__*/React.createElement(\"input\",{type:\"file\",id:\"text_file\",onChange:_this.handleClickOnUpload}))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"b\",null,\" 2. Choose a configuration file: \")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"select\",{name:\"conffileChoser\",id:\"conffileChoser\"},_this.createList(_this.state.confFileList),\" \"))),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\" \"),/*#__PURE__*/React.createElement(\"td\",{align:\"left\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{style:buttonStyle,onClick:_this.handleClickLoadFiles},\" \",\"Load files\")))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Download file\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"select\",{name:\"actionChooser\",id:\"actionChooser\"},\" \",_this.createList(_this.state.fileTypes)),\" \",/*#__PURE__*/React.createElement(\"select\",{name:\"fileToDownloadChooser\",id:\"fileToDownloadChooser\"},\" \",_this.createList(_this.state.filesList)),\" \",/*#__PURE__*/React.createElement(\"select\",{name:\"conffileToDownloadChooser\",id:\"conffileToDownloadChooser\"},_this.createList(_this.state.confFileList),\" \"),\"  \",/*#__PURE__*/React.createElement(\"button\",{style:buttonStyle,onClick:_this.handleClickOnDownload},\" \",\"Download file\",\" \")),/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"td\",{align:\"left\"},\" \",/*#__PURE__*/React.createElement(\"h6\",null,\" \",/*#__PURE__*/React.createElement(\"b\",null,\"\\xA9 Sapir Kikoz, Yifat Yankovich - \")),\" \"),/*#__PURE__*/React.createElement(\"td\",{align:\"right\"},\" \",/*#__PURE__*/React.createElement(\"h6\",null,\" September 2020 \"))));return page;};_this.returnEditPageLayout=function(){var page=/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h6\",null,\" \",/*#__PURE__*/React.createElement(\"b\",null,\"Choosen Article: \",_this.state.filename,/*#__PURE__*/React.createElement(\"br\",null),\"Choosen Configuration File: \",_this.state.conffilename)),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h6\",null,\" \",/*#__PURE__*/React.createElement(\"b\",null,\"Add or edit tags by selecting and right clicking the text.\"),\" \"),/*#__PURE__*/React.createElement(TaggedTextArea,{tagsAndColors:_this.state.tagsAndColors,tagsList:_this.state.tagsList,specialCharsList:_this.state.specialCharsList,fileContent:_this.state.fileContent,updateFileContent:_this.updateFileContent}),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"button\",{style:buttonStyle,onClick:_this.handleSaveFile},\" \",\"Save Work on System\"),\"     \",/*#__PURE__*/React.createElement(\"button\",{style:buttonStyle,onClick:_this.handleClickRetrunToMainMenu},\" \",\"Return to Main Menu\")));return page;};_this.updateFileContent=function(content){_this.state.isUpTodate=false;_this.setState({fileContent:content});};_this.createList=function(list){return list.map(function(part,i){return/*#__PURE__*/React.createElement(\"option\",{value:part},\" \",part);});};return _this;}_createClass(Main,[{key:\"getConficurationFromServer\",//the function thats doing the first fetch with th server\nvalue:function getConficurationFromServer(){var _this2=this;fetch(\"http://localhost:9000/\").then(function(res){return res.text();}).then(function(res){return _this2.arrageConfigutationsFromServer(res);});}//this function lunches automaticly with the built in when the websie is running\n//componentWillMount() {\n},{key:\"componentDidMount\",value:function componentDidMount(){this.getConficurationFromServer();}//initialize the articles list, the configuration files, and special cases based\n//on the data that received from server and held by filnames\n},{key:\"raiseWarning\",// push notification to user when clicking on the \"return to main menu\" button\n// without saving changes\nvalue:function raiseWarning(e){e.preventDefault();Alert.info(\"Make sure to save your changes before returning to the Main Menu\",{position:\"top\",timeout:\"none\",onClose:function onClose(){console.log(\"onClose Fired!\");}});}// Render the frame of the site and get the cueent page from the method this.returnPageLayout()\n},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{align:\"center\",style:divStyle},/*#__PURE__*/React.createElement(\"img\",{align:\"right\",src:biulogo,alt:\"biulogo\",style:{width:\"auto\",height:\"0.75cm\"}}),/*#__PURE__*/React.createElement(\"img\",{align:\"left\",src:logo,alt:\"logo\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h2\",null,\" \",/*#__PURE__*/React.createElement(\"b\",null,\"Jerusalem Knowledge Center\"),\" \"),/*#__PURE__*/React.createElement(\"h1\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Tag Editor\")),this.returnPageLayout(),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",null,this.props.children),/*#__PURE__*/React.createElement(Alert,{stack:{limit:3}}))));}// Returns the current page the web sites has to present.\n}]);return Main;}(Component);export default Main;","map":{"version":3,"sources":["C:/Users/Yifat/finalProject/text-tagging/src/components/main.jsx"],"names":["React","Component","Background","logo","biulogo","TaggedTextArea","Alert","divStyle","color","fontSize","fontFamily","backgroundSize","overflowX","height","background","backgroundImage","buttonStyle","backgroundColor","Main","state","filename","conffilename","fileContent","configurationFileContent","isUpTodate","filesList","confFileList","specialCharsList","tagsList","tagsAndColors","fileToUploadName","fileToUploadContent","newlyUploadedFileName","pageLayout","fileTypes","arrageConfigutationsFromServer","configurations","confs","split","textFiles","confFiles","spacialChars","push","setState","UpdateChosenFile","handleClickOnUpload","event","window","File","FileReader","FileList","Blob","file","document","querySelector","files","reader","textFile","namefile","target","value","length","type","match","onload","uploadFileToServer","readAsText","alert","handleClickLoadFiles","eventArgs","getElementById","getFileFromServer","confFile","makeStatisticsFile","address","fetch","method","headers","body","JSON","stringify","data","confData","confFileName","then","response","handleSaveFile","makeHtml","saveFileToServer","fileTosaveName","fileTosaveData","console","log","handleClickRetrunToMainMenu","raiseWarning","handleClickOnDownload","action","downloadedFileName","blob","url","URL","createObjectURL","a","createElement","href","download","click","setCurrentTextFile","text","fileData","slice","lenth","setCurrentConfigurationFile","conFileContent","newTags","tagslist","i","currentPair","pairKey","pairValue","result","getConficurationFromServer","innerHTML","htmlFile","exists","some","v","fileName","request","endsWith","res","returnPageLayout","returnMainMenuLayout","returnEditPageLayout","page","createList","updateFileContent","content","list","map","part","e","preventDefault","info","position","timeout","onClose","width","props","children","limit"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Background from \"../images/backgroundabout.jpg\";\r\nimport logo from \"../images/logo.png\";\r\nimport biulogo from \"../images/biulogo.png\";\r\nimport TaggedTextArea from \"./taggedTextArea\";\r\nimport \"react-s-alert/dist/s-alert-default.css\";\r\nimport Alert from \"react-s-alert\";\r\nimport \"react-s-alert/dist/s-alert-default.css\";\r\nimport \"react-s-alert/dist/s-alert-css-effects/slide.css\";\r\n\r\nconst divStyle = {\r\n  color: \"#5B6676\",\r\n  fontSize: \"medium\",\r\n  fontFamily: \"Arial\",\r\n  backgroundSize: \"contain\",\r\n  overflowX: \"hidden\",\r\n  height: \"100vh\",\r\n  background: \"url(shutterstock_125995700.jpg)\",\r\n  backgroundImage: `url(${Background})`,\r\n};\r\n\r\nconst buttonStyle = {\r\n  backgroundColor: \"#74CDD1\",\r\n};\r\n// backgroundSize: \"100%\",\r\nclass Main extends Component {\r\n  state = {\r\n    // Holds infornation on the files are cuurently being worked on.\r\n    filename: \"\",\r\n    conffilename: \"\",\r\n    fileContent: \"\",\r\n    configurationFileContent: \"\",\r\n    isUpTodate: true,\r\n\r\n    // Holds te lists of files, configuration files, and spesial character,\r\n    // the server have sent.\r\n    filesList: [],\r\n    confFileList: [],\r\n    specialCharsList: [],\r\n\r\n    // Holds the tags' names the user can tag the text with.\r\n    // Each tag has its color.\r\n    tagsList: [],\r\n    tagsAndColors: {},\r\n\r\n    // Used when a new file is uploaded to the server.\r\n    fileToUploadName: \"\",\r\n    fileToUploadContent: \"\",\r\n    newlyUploadedFileName: \"\",\r\n    \r\n    // Saves the title of the current page presented/\r\n    pageLayout: \"choose\",\r\n\r\n    // Holds a list of file types the user can download from the server.\r\n    fileTypes: [\"clean file\", \"tagged file\", \"report\", \"html\"],\r\n  };\r\n\r\n  //the function thats doing the first fetch with th server\r\n  getConficurationFromServer() {\r\n    fetch(\"http://localhost:9000/\")\r\n      .then((res) => res.text())\r\n      .then((res) => this.arrageConfigutationsFromServer(res));\r\n  }\r\n\r\n  //this function lunches automaticly with the built in when the websie is running\r\n  //componentWillMount() {\r\n  componentDidMount(){\r\n      this.getConficurationFromServer();\r\n  }\r\n\r\n  //initialize the articles list, the configuration files, and special cases based\r\n  //on the data that received from server and held by filnames\r\n  arrageConfigutationsFromServer = (configurations) => {\r\n    // Saperate the files to text files and configuration files.\r\n    let confs = configurations.split(\"\\n\");\r\n\r\n    // Seperate the text files names.\r\n    let textFiles = confs[0].split(\",\");\r\n\r\n    // Seperates the configuration file names.\r\n    let confFiles = confs[1].split(\",\");\r\n\r\n    // Seperate the spacial chars the marker will egnore.\r\n    let spacialChars = confs[2].split(\" \");\r\n    spacialChars.push(\" \");\r\n    spacialChars.push(\"\\n\");\r\n    spacialChars.push(\"\\r\");\r\n\r\n    this.state.filesList = textFiles;\r\n    this.state.confFileList = confFiles;\r\n    this.setState({ specialCharsList: spacialChars });\r\n    this.UpdateChosenFile();\r\n  };\r\n\r\n  //lunches when the user clicks on the upload bottun -\r\n  //saves the chosen file name and reads the dat of the file\r\n  handleClickOnUpload = (event) => {\r\n    if (window.File && window.FileReader && window.FileList && window.Blob) {\r\n      // var preview = document.getElementById(\"temporaryPlace\");\r\n      var file = document.querySelector(\"input[id=text_file]\").files[0];\r\n      var reader = new FileReader();\r\n      var textFile = /text.*/;\r\n\r\n      var namefile = event.target.value;\r\n      namefile = namefile.split(\"\\\\\");\r\n      this.state.fileToUploadName = namefile[namefile.length - 1];\r\n\r\n      if (file.type.match(textFile)) {\r\n        reader.onload = this.uploadFileToServer;\r\n      }\r\n      reader.readAsText(file);\r\n    } else {\r\n      alert(\"Your browser is too old to support HTML5 File API\");\r\n    }\r\n  };\r\n\r\n  // previously called loadDataAndConfFiles\r\n  //saves the chosen fils name - calls to function that reads the file and transfer the appliction to\r\n  //he edit screen\r\n  handleClickLoadFiles = (eventArgs) => {\r\n    var textFile = document.getElementById(\"fileChoser\");\r\n    textFile = textFile.value;\r\n    this.getFileFromServer(textFile);\r\n    var confFile = document.getElementById(\"conffileChoser\");\r\n    confFile = confFile.value;\r\n    this.getFileFromServer(confFile);\r\n    this.state.isUpTodate = true;\r\n    this.setState({ pageLayout: \"edit\" });\r\n  };\r\n\r\n  //asks the server to generate statistic file to the file that the function describes\r\n  makeStatisticsFile = () => {\r\n    let address = \"http://localhost:9000/makeReport\";\r\n\r\n    fetch(address, {\r\n      method: \"POST\",\r\n      headers: { \"Content-type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        data: this.state.fileContent,\r\n        filename: this.state.filename,\r\n        confData: this.state.configurationFileContent,\r\n        confFileName: this.state.conffilename,\r\n      }),\r\n    }).then(function (response) {\r\n    });\r\n  };\r\n\r\n  //the function sends a request to the server to save the changes the user did in the text\r\n  handleSaveFile = (event) => {\r\n    this.makeStatisticsFile();\r\n    this.makeHtml();\r\n    this.saveFileToServer(this.state.filename, this.state.fileContent);\r\n    this.state.isUpTodate = true;\r\n  };\r\n\r\n  saveFileToServer = (fileTosaveName, fileTosaveData) =>{\r\n    let address = \"http://localhost:9000/saveFile\";\r\n\r\n    fetch(address, {\r\n      method: \"POST\",\r\n      headers: { \"Content-type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        data: fileTosaveData,\r\n        filename: fileTosaveName,\r\n      }),\r\n    }).then(function (response) {\r\n      //let answer = response.body.getReader();\r\n      console.log();\r\n    });\r\n  }\r\n\r\n  //returns to the main menu screen of the application\r\n  // retrunToChooseFile\r\n  handleClickRetrunToMainMenu = (event) => {\r\n    if (!this.state.isUpTodate) {\r\n      this.raiseWarning(event);\r\n    } else {\r\n      this.setState({ pageLayout: \"choose\" });\r\n    }\r\n\r\n    // Set isUpTodate to  true, to allow the user\r\n    // to return to the main menu without saveing his work.\r\n    // (At the first attempt of a user to return to the main menu,\r\n    // a warning message appears, and at the secound attempt, \r\n    // the application returns to the main menu).\r\n    this.state.isUpTodate = true;\r\n  };\r\n\r\n  //describes a post request to server in order to download the chosen file type\r\n  handleClickOnDownload = (eventArgs) => {\r\n    var action = document.getElementById(\"actionChooser\");\r\n    action = action.value;\r\n    var filename = document.getElementById(\"fileToDownloadChooser\");\r\n    filename = filename.value;\r\n    var conffilename = document.getElementById(\"conffileToDownloadChooser\");\r\n    conffilename = conffilename.value;\r\n\r\n    let downloadedFileName = action + \"_\" + filename;\r\n    if (action === \"html\") {\r\n      downloadedFileName = filename + \".html\";\r\n    }\r\n\r\n    let address = \"http://localhost:9000/downloadfile\";\r\n    fetch(address, {\r\n      method: \"POST\",\r\n      headers: { \"Content-type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        action: action,\r\n        filename: filename,\r\n        confFileName: conffilename,\r\n      }),\r\n    }).then((response) => {\r\n      response.blob().then((blob) => {\r\n        let url = window.URL.createObjectURL(blob);\r\n        let a = document.createElement(\"a\");\r\n        a.href = url;\r\n        a.download = downloadedFileName;\r\n        a.click();\r\n      });\r\n    });\r\n  };\r\n\r\n  //recieved the file name with the file content and saves on local variables\r\n  // previously called acceptFilesFromServer\r\n  setCurrentTextFile = (text) => {\r\n    let filename = text.split(\"\\n\");\r\n    let fileData = text.slice(filename[0].length + 1, text.lenth);\r\n    //first chunk of text is the name\r\n    this.setState({ filename: filename[0] });\r\n    //the rest of the text\r\n    this.setState({ fileContent: fileData });\r\n  };\r\n\r\n  //recives configurtion file name and this file content and saves to local variables\r\n  // previously called acceptConfigurationFilesFromServer\r\n  setCurrentConfigurationFile = (text) => {\r\n    let filename = text.split(\"\\n\");\r\n    let conFileContent = filename.slice(1, filename.length);\r\n    let newTags = {}; //person: \"yellow\", place: \"red\", bla: \"lightpink\", period: \"green\"};\r\n\r\n    // Helps to create the context menu.\r\n    let tagslist = [];\r\n\r\n    for (let i = 0; i < conFileContent.length; i++) {\r\n      let currentPair = conFileContent[i].split(\":\");\r\n      tagslist.push(currentPair[0]);\r\n      let pairKey = currentPair[0];\r\n      let pairValue = currentPair[1];\r\n      newTags[pairKey] = pairValue;\r\n    }\r\n\r\n    this.state.conffilename = filename[0];\r\n    this.state.configurationFileContent = conFileContent;\r\n    this.state.tagsList = tagslist;\r\n    // Initiate setState so the view will update.\r\n    this.setState({ tagsAndColors: newTags });\r\n  };\r\n\r\n  //uploads new file to server and uses fetch request\r\n  // previously called loadFile\r\n  uploadFileToServer = (event) => {\r\n    let fileToUploadContent = event.target.result;\r\n    this.saveFileToServer(this.state.fileToUploadName, fileToUploadContent);\r\n    \r\n    // Get the updated list of files on the server.\r\n    this.getConficurationFromServer();\r\n  //  this.UpdateChosenFile();\r\n  };\r\n\r\n  //describes the html form of the highlighted file\r\n  makeHtml = () => {\r\n    var textFile = document.getElementById(\"text\");\r\n    textFile = textFile.innerHTML;\r\n    var htmlFile = \"\";\r\n    htmlFile += \"<!DOCTYPE html>\";\r\n    htmlFile += \"<html>\";\r\n    htmlFile += \"<head>\";\r\n    htmlFile += \"<title>\";\r\n    htmlFile += this.state.filename;\r\n    htmlFile += \"</title>\";\r\n    htmlFile += \"</head>\";\r\n    htmlFile += \"<body>\";\r\n    htmlFile += \"<h3>\";\r\n    htmlFile += textFile;\r\n    htmlFile += \"</h3>\";\r\n    htmlFile += \"</body>\";\r\n    htmlFile += \"</html>\";\r\n\r\n    let address = \"http://localhost:9000/saveFile\";\r\n    fetch(address, {\r\n      method: \"POST\",\r\n      headers: { \"Content-type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        data: htmlFile,\r\n        filename: this.state.filename + \".html\",\r\n      }),\r\n    }).then(function (response) {\r\n      //let answer = response.body.getReader();\r\n    });\r\n  };\r\n\r\n  // this functions being used after uploading new file to the server\r\n  // checks if the uploading sucseeded and the updates the name of the chosen file to be the file that was uploaded \r\n  UpdateChosenFile = () => {\r\n    // If the list of files sent from the server had the file was added to the server.\r\n    const exists = this.state.filesList.some(\r\n      (v) => v === this.state.fileToUploadName\r\n    );\r\n    if (exists) {\r\n      var textFile = document.getElementById(\"fileChoser\");\r\n      textFile.value = this.state.fileToUploadName;\r\n    }\r\n    this.state.fileToUploadName = \"\";\r\n  };\r\n\r\n  // sends request to the server and asks for an article or configuration file\r\n  //previously called handleChoosefile.\r\n  getFileFromServer = (fileName) => {\r\n    //var fileName = filename; //eventArgs.currentTarget.innerHTML.trim();\r\n    var request;\r\n    if (!fileName.endsWith(\".txt\")) {\r\n      request = \"http://localhost:9000/openConfigurationFile/\" + fileName;\r\n      fetch(request)\r\n        .then((res) => res.text())\r\n        .then((res) => this.setCurrentConfigurationFile(res));\r\n    } else {\r\n      request = \"http://localhost:9000/openFile/\" + fileName;\r\n      fetch(request)\r\n        .then((res) => res.text())\r\n        .then((res) => this.setCurrentTextFile(res));\r\n    }\r\n  };\r\n\r\n  // push notification to user when clicking on the \"return to main menu\" button\r\n  // without saving changes\r\n  raiseWarning(e) {\r\n    e.preventDefault();\r\n    Alert.info(\r\n      \"Make sure to save your changes before returning to the Main Menu\",\r\n      {\r\n        position: \"top\",\r\n        timeout: \"none\",\r\n        onClose: function () {\r\n          console.log(\"onClose Fired!\");\r\n        },\r\n      }\r\n    );\r\n  }\r\n\r\n  // Render the frame of the site and get the cueent page from the method this.returnPageLayout()\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <div align=\"center\" style={divStyle}>\r\n          <img\r\n            align=\"right\"\r\n            src={biulogo}\r\n            alt=\"biulogo\"\r\n            style={{ width: \"auto\", height: \"0.75cm\" }}\r\n          />\r\n          <img align=\"left\" src={logo} alt=\"logo\" />\r\n          <br></br>\r\n          <br></br>\r\n          <h2>\r\n            {\" \"}\r\n            <b>Jerusalem Knowledge Center</b>{\" \"}\r\n          </h2>\r\n          <h1>\r\n            <b>Tag Editor</b>\r\n          </h1>\r\n          {this.returnPageLayout()}\r\n          <div>\r\n            <span>{this.props.children}</span>\r\n            <Alert stack={{ limit: 3 }} />\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  // Returns the current page the web sites has to present.\r\n  returnPageLayout = () => {\r\n    if (this.state.pageLayout === \"choose\") {\r\n      return this.returnMainMenuLayout();\r\n    } else if (this.state.pageLayout === \"edit\") {\r\n      return this.returnEditPageLayout();\r\n    }\r\n  };\r\n\r\n  // Returns the page\r\n  returnMainMenuLayout = () => {\r\n    let page = (\r\n      <div>\r\n        <br></br>\r\n        <table>\r\n          <tr>\r\n            <td align=\"center\">\r\n              {\" \"}\r\n              <b>1. Select an existing document</b>{\" \"}\r\n            </td>\r\n            <td>\r\n              <select name=\"fileChoser\" id=\"fileChoser\">\r\n                {\" \"}\r\n                {this.createList(this.state.filesList)}\r\n              </select>{\" \"}\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td align=\"center\">\r\n              <b> -or- </b>{\" \"}\r\n            </td>\r\n            <td> </td>\r\n          </tr>\r\n          <tr>\r\n            <td align=\"center\">\r\n              <b>\r\n                Upload New File to Server <br></br>{\" \"}\r\n              </b>\r\n            </td>\r\n            <td>\r\n              {\" \"}\r\n              <input\r\n                type=\"file\"\r\n                id=\"text_file\"\r\n                onChange={this.handleClickOnUpload}\r\n              ></input>\r\n            </td>\r\n          </tr>\r\n          <br></br>\r\n          <tr>\r\n            <td>\r\n              <b> 2. Choose a configuration file: </b>\r\n            </td>\r\n            <td>\r\n              <select name=\"conffileChoser\" id=\"conffileChoser\">\r\n                {this.createList(this.state.confFileList)}{\" \"}\r\n              </select>\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td> </td>\r\n            <td align=\"left\">\r\n              <br></br>\r\n              <button style={buttonStyle} onClick={this.handleClickLoadFiles}>\r\n                {\" \"}\r\n                Load files\r\n              </button>\r\n            </td>\r\n          </tr>\r\n        </table>\r\n        <br></br>\r\n        <p>\r\n          <b>Download file</b>\r\n          <br></br>\r\n          <select name=\"actionChooser\" id=\"actionChooser\">\r\n            {\" \"}\r\n            {this.createList(this.state.fileTypes)}\r\n          </select>{\" \"}\r\n          <select name=\"fileToDownloadChooser\" id=\"fileToDownloadChooser\">\r\n            {\" \"}\r\n            {this.createList(this.state.filesList)}\r\n          </select>{\" \"}\r\n          <select\r\n            name=\"conffileToDownloadChooser\"\r\n            id=\"conffileToDownloadChooser\"\r\n          >\r\n            {this.createList(this.state.confFileList)}{\" \"}\r\n          </select>\r\n          {\"  \"}\r\n          <button style={buttonStyle} onClick={this.handleClickOnDownload}>\r\n            {\" \"}\r\n            Download file{\" \"}\r\n          </button>\r\n        </p>\r\n        <table>\r\n          <td align=\"left\">\r\n            {\" \"}\r\n            <h6>\r\n              {\" \"}\r\n              <b>© Sapir Kikoz, Yifat Yankovich - </b>\r\n            </h6>{\" \"}\r\n          </td>\r\n          <td align=\"right\">\r\n            {\" \"}\r\n            <h6> September 2020 </h6>\r\n          </td>\r\n        </table>\r\n      </div>\r\n    );\r\n    return page;\r\n  };\r\n\r\n  // rendering the second screen of the application\r\n  returnEditPageLayout = () => {\r\n    let page = (\r\n      <div>\r\n        <h6>\r\n          {\" \"}\r\n          <b>\r\n            Choosen Article: {this.state.filename}\r\n            <br></br>\r\n            Choosen Configuration File: {this.state.conffilename}\r\n          </b>\r\n        </h6>\r\n\r\n        <br></br>\r\n        <h6>\r\n          {\" \"}\r\n          <b>Add or edit tags by selecting and right clicking the text.</b>{\" \"}\r\n        </h6>\r\n        <TaggedTextArea\r\n          tagsAndColors={this.state.tagsAndColors}\r\n          tagsList={this.state.tagsList}\r\n          specialCharsList={this.state.specialCharsList}\r\n          fileContent={this.state.fileContent}\r\n          updateFileContent={this.updateFileContent}\r\n        />\r\n        <p>\r\n          <button style={buttonStyle} onClick={this.handleSaveFile}>\r\n            {\" \"}\r\n            Save Work on System\r\n          </button>\r\n          {\"     \"}\r\n          <button\r\n            style={buttonStyle}\r\n            onClick={this.handleClickRetrunToMainMenu}\r\n          >\r\n            {\" \"}\r\n            Return to Main Menu\r\n          </button>\r\n        </p>\r\n      </div>\r\n    );\r\n    return page;\r\n  };\r\n\r\n  // after editing - adding/removing tag to the text - the content is the updated text\r\n  // and insert it to the local variable of the applications\r\n  updateFileContent = (content) => {\r\n    this.state.isUpTodate = false;\r\n    this.setState({ fileContent: content });\r\n  };\r\n\r\n  // Gets a list of string and make a drop down option list of them.\r\n  // Creates only the list of the drop down list <option>\r\n  // and not the <select> drop down list itself.\r\n  createList = (list) => {\r\n    return list.map((part, i) => <option value={part}> {part}</option>);\r\n  };\r\n}\r\nexport default Main;"]},"metadata":{},"sourceType":"module"}